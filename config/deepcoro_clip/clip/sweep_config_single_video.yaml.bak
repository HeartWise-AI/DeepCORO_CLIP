command:
  - torchrun
  - "--nproc_per_node=2"
  - "--master_port=29501"
  - "scripts/main.py"
  - "--base_config"
  - "config/deepcoro_clip/clip/base_config.yaml"
  - ${args}

name: "DeepCORO_Clip_Sweep_Single_Video"
project: "DeepCORO_Clip_Sweep_Single_Video"
entity: "mhi_ai"

method: bayes

metric:
  name: val/loss
  goal: minimize

parameters:
  lr:
    distribution: log_uniform_values
    min: 0.00001
    max: 0.0001

  optimizer:
    values: [RAdam, AdamW]

  scheduler_name:
    values: ["linear_warmup", "cosine_with_warmup", "cosine_with_hard_restarts_with_warmup"]

  loss_name:
    values: ["siglip_ddp", "clip_loss", "clip_loss_with_margin"]

  model_name:
    values: ["x3d_m"]

  temperature:
    distribution: uniform
    min: 0.01
    max: 0.1

  num_warmup_percent:
    values: [0.1, 0.2]

  dropout:
    distribution: uniform
    min: 0.1
    max: 0.5

  video_freeze_ratio:
    values: [0.8, 0.9, 1.0]

  text_freeze_ratio:
    values: [0.0, 0.5, 0.8, 0.9, 1.0]

  view_count:
    values: [1, 2]

  num_heads:
    values: [2, 4]

  aggregator_depth:
    values: [1, 2]

  rand_augment:
    values: [true]

  gradient_accumulation_steps:
    values: [1, 2]

  batch_size:
    values: [12, 24]

  max_grad_norm:
    values: [5.0, 10.0]

  frames:
    values: [32, 48, 72]

  apply_mask:
    values: [false]

  tag:
    values: ["mvit_pretrained"]

  name:
    values: ["DeepCORO_Clip_Sweep_Single_Video"]

  project:
    values: ["DeepCORO_Clip_Sweep_Single_Video"]

  entity:
    values: ["mhi_ai"]

early_terminate:
  type: hyperband
  min_iter: 3
  eta: 2
  s: 2
